<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realutsha Weather App</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Deep reddish gradient */
            background: linear-gradient(135deg, #370000, #1a0000); 
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        /* Custom scrollbar for better aesthetics */
        .scrollable-content::-webkit-scrollbar {
            width: 6px;
        }
        .scrollable-content::-webkit-scrollbar-thumb {
            background-color: #4a5568;
            border-radius: 3px;
        }
        .scrollable-content::-webkit-scrollbar-track {
            background: transparent;
        }
        .weather-card {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.25);
        }
    </style>
</head>
<body class="p-4">

    <div id="weather-app" class="weather-card bg-gray-800 text-white p-6 md:p-10 rounded-xl w-full max-w-lg mx-auto transition-all duration-300">
        
        <!-- Header & Search Input -->
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-center mb-6 text-red-400">Realutsha Weather App</h1>
            <div class="flex space-x-2">
                <input type="text" id="city-input" placeholder="Enter city name (e.g., London)" 
                       class="flex-grow p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-red-500 focus:border-red-500 transition-colors text-white"
                       aria-label="City Name Input">
                <button id="search-button" 
                        class="px-4 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition-colors flex items-center justify-center">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </button>
            </div>
        </header>

        <!-- Weather Display Area -->
        <main id="weather-display" class="scrollable-content overflow-y-auto max-h-[70vh]">
            <!-- Loading and Error State -->
            <div id="loading" class="text-center py-10 hidden">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto"></div>
                <p class="mt-4 text-gray-400">Fetching weather data...</p>
            </div>

            <div id="error-message" class="text-center py-10 text-red-400 hidden">
                <p class="text-xl font-medium">City not found. Please try again.</p>
            </div>

            <!-- Initial State -->
            <div id="initial-state" class="text-center py-16">
                <svg class="w-16 h-16 mx-auto text-red-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.976 5.5 5.5 0 00-1.8 14.285M13 7a4 4 0 00-4 4"></path></svg>
                <p class="text-gray-400">Enter a city name above to get the current weather.</p>
            </div>


            <!-- Main Weather Card (Hidden initially) -->
            <div id="weather-content" class="hidden">
                
                <!-- Main Temperature & Icon -->
                <section class="text-center mb-8 bg-gray-700 p-6 rounded-xl">
                    <h2 id="city-name" class="text-4xl md:text-5xl font-extrabold mb-1">---</h2>
                    <p id="date-time" class="text-sm text-gray-400 mb-4"></p>
                    
                    <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-8">
                        <!-- Weather Icon and Description -->
                        <div class="flex items-center">
                            <img id="weather-icon" src="https://openweathermap.org/img/wn/04d@2x.png" alt="Weather Icon" class="w-20 h-20 md:w-28 md:h-28">
                            <p id="weather-description" class="text-xl capitalize text-gray-300 font-medium ml-4">Loading...</p>
                        </div>
                        
                        <!-- Temperature -->
                        <div class="text-6xl md:text-8xl font-light">
                            <span id="temperature">--</span><span class="text-4xl align-top">Â°C</span>
                        </div>
                    </div>
                    
                    <p id="feels-like" class="text-lg text-gray-400 mt-2">Feels like: --Â°C</p>
                </section>
                
                <!-- Details Grid -->
                <section class="grid grid-cols-2 gap-4">
                    <!-- Humidity -->
                    <div class="detail-box">
                        <h3 class="text-sm text-gray-400 mb-1 flex items-center">
                            <span class="mr-2">ğŸ’§</span> Humidity
                        </h3>
                        <p id="humidity" class="text-2xl font-semibold">--%</p>
                    </div>

                    <!-- Wind Speed -->
                    <div class="detail-box">
                        <h3 class="text-sm text-gray-400 mb-1 flex items-center">
                            <span class="mr-2">ğŸ’¨</span> Wind Speed
                        </h3>
                        <p id="wind-speed" class="text-2xl font-semibold">-- m/s</p>
                    </div>

                    <!-- Max Temp -->
                    <div class="detail-box">
                        <h3 class="text-sm text-gray-400 mb-1 flex items-center">
                            <span class="mr-2">â¬†ï¸</span> Max Temp
                        </h3>
                        <p id="temp-max" class="text-2xl font-semibold">--Â°C</p>
                    </div>

                    <!-- Min Temp -->
                    <div class="detail-box">
                        <h3 class="text-sm text-gray-400 mb-1 flex items-center">
                            <span class="mr-2">â¬‡ï¸</span> Min Temp
                        </h3>
                        <p id="temp-min" class="text-2xl font-semibold">--Â°C</p>
                    </div>
                    
                    <!-- Sunrise -->
                    <div class="detail-box">
                        <h3 class="text-sm text-gray-400 mb-1 flex items-center">
                            <span class="mr-2">ğŸŒ…</span> Sunrise
                        </h3>
                        <p id="sunrise" class="text-2xl font-semibold">--:-- AM</p>
                    </div>

                    <!-- Sunset -->
                    <div class="detail-box">
                        <h3 class="text-sm text-gray-400 mb-1 flex items-center">
                            <span class="mr-2">ğŸŒ‡</span> Sunset
                        </h3>
                        <p id="sunset" class="text-2xl font-semibold">--:-- PM</p>
                    </div>
                </section>
            </div>
        </main>
        
        <!-- API Note -->
        <footer class="mt-8 pt-4 border-t border-gray-700 text-center text-xs text-gray-500">
            Weather data powered by OpenWeatherMap
        </footer>

    </div>

    <script>
        // Set up the API configuration
        // !!! IMPORTANT: Replace 'YOUR_API_KEY_HERE' with your actual OpenWeatherMap API key.
        const API_KEY = 'YOUR_API_KEY_HERE';
        const BASE_URL = 'https://api.openweathermap.org/data/2.5/weather';
        const UNITS = 'metric'; // Use 'metric' for Celsius, 'imperial' for Fahrenheit

        // --- DOM Elements ---
        const cityInput = document.getElementById('city-input');
        const searchButton = document.getElementById('search-button');
        const weatherDisplay = document.getElementById('weather-display');
        const weatherContent = document.getElementById('weather-content');
        const loadingState = document.getElementById('loading');
        const initialState = document.getElementById('initial-state');
        const errorState = document.getElementById('error-message');

        const cityNameEl = document.getElementById('city-name');
        const dateTimeEl = document.getElementById('date-time');
        const temperatureEl = document.getElementById('temperature');
        const feelsLikeEl = document.getElementById('feels-like');
        const weatherIconEl = document.getElementById('weather-icon');
        const weatherDescriptionEl = document.getElementById('weather-description');
        const humidityEl = document.getElementById('humidity');
        const windSpeedEl = document.getElementById('wind-speed');
        const tempMaxEl = document.getElementById('temp-max');
        const tempMinEl = document.getElementById('temp-min');
        const sunriseEl = document.getElementById('sunrise');
        const sunsetEl = document.getElementById('sunset');

        /**
         * Utility function to format UNIX timestamp to a readable time string.
         * @param {number} timestamp - The UNIX timestamp in seconds.
         * @param {number} timezoneOffset - The timezone offset in seconds.
         * @returns {string} Formatted time string (e.g., "6:30 AM")
         */
        function formatTime(timestamp, timezoneOffset) {
            // Convert to milliseconds
            const date = new Date(timestamp * 1000);
            
            // Apply the local offset of the browser and the city's offset
            const localTime = date.getTime();
            const localOffset = date.getTimezoneOffset() * 60000;
            const utc = localTime + localOffset;
            const targetTime = utc + (timezoneOffset * 1000);
            
            const cityDate = new Date(targetTime);

            const options = { 
                hour: 'numeric', 
                minute: '2-digit', 
                hour12: true 
            };
            return cityDate.toLocaleTimeString('en-US', options);
        }
        
        /**
         * Utility function to format the current date.
         * @returns {string} Formatted date string (e.g., "Monday, November 17, 2025")
         */
        function formatDate() {
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            return new Date().toLocaleDateString('en-US', options);
        }

        /**
         * Updates the UI elements with the fetched weather data.
         * @param {object} data - The weather data object from the API.
         */
        function updateUI(data) {
            // Hide all state displays first
            initialState.classList.add('hidden');
            loadingState.classList.add('hidden');
            errorState.classList.add('hidden');
            weatherContent.classList.remove('hidden');

            const { name, main, weather, wind, sys, timezone } = data;
            const tempUnit = UNITS === 'metric' ? 'Â°C' : 'Â°F';
            const speedUnit = UNITS === 'metric' ? 'm/s' : 'mph';

            // Main Data
            cityNameEl.textContent = name;
            dateTimeEl.textContent = formatDate();
            temperatureEl.textContent = Math.round(main.temp);
            feelsLikeEl.textContent = `Feels like: ${Math.round(main.feels_like)}${tempUnit}`;
            
            // Weather Condition
            const iconCode = weather[0].icon;
            weatherIconEl.src = `https://openweathermap.org/img/wn/${iconCode}@2x.png`;
            weatherDescriptionEl.textContent = weather[0].description;
            
            // Detail Metrics
            humidityEl.textContent = `${main.humidity}%`;
            windSpeedEl.textContent = `${wind.speed} ${speedUnit}`;
            tempMaxEl.textContent = `${Math.round(main.temp_max)}${tempUnit}`;
            tempMinEl.textContent = `${Math.round(main.temp_min)}${tempUnit}`;
            
            // Sunrise/Sunset (time is converted using the city's timezone offset)
            sunriseEl.textContent = formatTime(sys.sunrise, timezone);
            sunsetEl.textContent = formatTime(sys.sunset, timezone);
        }

        /**
         * Handles error display in the UI.
         * @param {string} message - The error message to display.
         */
        function displayError(message = 'City not found or API issue.') {
            initialState.classList.add('hidden');
            loadingState.classList.add('hidden');
            weatherContent.classList.add('hidden');
            errorState.classList.remove('hidden');
            errorState.querySelector('p').textContent = message;
        }

        /**
         * Fetches weather data from the OpenWeatherMap API.
         * @param {string} city - The name of the city to search for.
         */
        async function fetchWeather(city) {
            if (!city) {
                displayError('Please enter a city name.');
                return;
            }

            if (API_KEY === 'YOUR_API_KEY_HERE') {
                displayError("API Key is missing. Please sign up for a key and replace 'YOUR_API_KEY_HERE' in the script.");
                return;
            }

            // Reset UI state
            initialState.classList.add('hidden');
            weatherContent.classList.add('hidden');
            errorState.classList.add('hidden');
            loadingState.classList.remove('hidden');

            const endpoint = `${BASE_URL}?q=${city}&units=${UNITS}&appid=${API_KEY}`;
            
            try {
                const response = await fetch(endpoint);
                const data = await response.json();

                if (data.cod === 200) {
                    updateUI(data);
                } else if (data.cod === '404') {
                    displayError(`City "${city}" not found.`);
                } else {
                    displayError(data.message || 'An unknown error occurred.');
                }
            } catch (error) {
                console.error('Fetch error:', error);
                displayError('Failed to fetch data. Check your connection or API key.');
            } finally {
                loadingState.classList.add('hidden');
            }
        }

        // --- Event Listeners ---
        searchButton.addEventListener('click', () => {
            fetchWeather(cityInput.value.trim());
        });

        cityInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                fetchWeather(cityInput.value.trim());
            }
        });

        // Set initial focus
        window.onload = () => {
            cityInput.focus();
        };

    </script>
</body>
</html>
